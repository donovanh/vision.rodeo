<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Reps Dev Diary #2: TestFlight &amp; Timers - Donovan's Vision Blog</title>
		<meta name="description" content="Some early testing, feedback and improvements">
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Donovan’s Vision Blog">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="Donovan’s Vision Blog">
		<meta name="generator" content="Eleventy v2.0.1">
		<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
* { box-sizing: border-box; }
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono,
		Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono,
		Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New,
		Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-70: rgba(255, 255, 255, 0.3);
	--color-gray-50: rgba(255, 255, 255, 0.5);
	--color-gray-20: rgba(255, 255, 255, 0.8);

	--background-color: #241653;

	--text-color: var(--color-gray-20);
	--text-color-link: rgba(241, 233, 255, 0.8);
	--text-color-link-active: rgba(241, 233, 255, 1);
	--text-color-link-visited: rgba(241, 233, 255, 0.5);

	--syntax-tab-size: 2;
}

/* TODO: Make a proper dark theme? */
/* @media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #c0c0c0;
		--color-gray-70: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above 
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
} */

/* Global stylesheet */
* {
	box-sizing: border-box;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
	/* TODO: Have this dynamically change by time of day */
	background-image: linear-gradient(
			to bottom,
			rgba(255, 240, 255, 0.2),
			rgba(120, 20, 90, 0.6)
		),
		url("/img/office.webp");
	background-attachment: fixed;
	background-size: cover;
}
html {
	overflow-y: scroll;
}

.bodyBackground {
	opacity: 0;
}

@media (max-width: 500px) {
	body {
		background: rgb(40, 40, 40);
	}
	.bodyBackground {
		opacity: 1;
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		top: 0;
		background-size: cover;
		background-image: linear-gradient(
				to bottom,
				rgba(245, 246, 252, 0.52),
				rgba(117, 19, 93, 0.73),
				rgb(40, 40, 40)
			),
			url("/img/office.webp");
		background-repeat: no-repeat;
	}
}

.bodyBGCover {
	position: fixed;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	background: rgba(0, 0, 0, 0.75);
	opacity: 0;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main {
	padding: 1rem;
}
/* main.animated {
	animation: slide-up 0.5s cubic-bezier(0, 1, 0.3, 1);
} */
main :first-child {
	margin-top: 0;
}

.links-nextprev {
	list-style: none;
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
pre:where([class*="language-"]) {
	width: 100%;
}
pre:not([class*="language-"]) {
	margin: 0.5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
}
code {
	word-break: break-all;
}

.panel {
	background-color: rgba(200, 180, 200, 0.2);
	box-shadow: -0.25px -0.25px 0.25px 0 rgba(255, 255, 255, 0.75),
		0 0 1rem 0 rgba(0, 0, 0, 0.1);
	border-radius: 2.5rem;
	position: relative;
	backdrop-filter: blur(20px);
	-webkit-backdrop-filter: blur(20px);
}

.padded {
	padding: 2rem 4rem;
}

@media (max-width: 500px) {
	.padded {
		padding: 1rem;
	}
}

/* Header */
.header-container {
	perspective: 100vw;
	perspective-origin: 50% 30vh;
	transform-style: preserve-3d;
}
header {
	font-family: var(--font-family-monospace);
	text-align: center;
	align-items: center;
	padding: 4rem 0;
	margin: 2rem auto 4rem;
	max-width: 90rem;
	z-index: 128;
}

@media (max-width: 90rem) {
	header {
		margin: 2rem 1rem 3rem;
	}
}

@media (max-width: 40rem) {
	header.panel {
		background: none;
		box-shadow: none;
		backdrop-filter: none;
		-webkit-backdrop-filter: none;
		margin: 2rem 1rem;
	}
}

/* header.animated {
	animation: fade-in 1s ease-out, pop-in 1s cubic-bezier(0, 1, 0.3, 1);
} */

@keyframes fade-in {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

@keyframes pop-in {
	0%,
	20% {
		transform: translateZ(-500px) rotateX(-45deg);
	}
	100% {
		transform: none;
	}
}

@keyframes slide-up {
	0% {
		transform: translateY(50px);
	}
	100% {
		transform: none;
	}
}

.wordart {
	display: inline-block;
	margin: 2rem 0 4rem;
	font-size: 9vw;
	text-shadow: none;
	background: linear-gradient(
		183deg,
		rgba(183, 0, 255, 0.7) 10%,
		rgba(255, 21, 200, 0.7) 70%
	);
	background-clip: text;
	-webkit-background-clip: text;
	color: transparent;
	font-family: "Impact";
	transform: skewY(-8deg) scaleY(1.3) scaleX(0.8);
	-webkit-text-stroke: 1px rgba(255, 255, 255, 0.25);
}

.wordart-wrapper {
	filter: drop-shadow(2px 2px 0px rgba(2, 5, 42, 0.8));
}

@media (min-width: 1400px) {
	.wordart {
		font-size: 8rem;
	}
}

@media (max-width: 500px) {
	.wordart-wrapper {
		width: 100%;
		position: absolute;
		left: 0;
		top: -40px;
	}
	.wordart {
		font-size: 2.5rem;
	}
}

/* Nav */
nav {
	max-width: 22rem;
	margin: 0 auto;
	margin-bottom: -8rem;
}
nav.secondary {
	margin: 1rem auto 2rem;
}
.nav {
	display: flex;
	justify-content: space-between;
	padding: 1.5rem 1rem;
	list-style: none;
}
.nav-item {
	display: inline-block;
	padding: 0 1rem;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	color: #fff;
}

@media (max-width: 40rem) {
	nav {
		margin-bottom: -7rem;
	}
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	margin-bottom: 1em;
}
.home .postlist-item {
	padding-bottom: 4rem;
}
.nested .postlist-item {
	padding-top: 0;
	padding-bottom: 0;
}
.postlist-item time {
	width: 100%;
}
.postlist-item img,
main img {
	max-width: 100%;
	height: auto;
	border-radius: 2rem;
	box-shadow: -0.25px -0.25px 0.25px 0 rgba(255, 255, 255, 0.5),
		0 0 1rem 0 rgba(0, 0, 0, 0.2);
}
.video-wrapper {
	width: 100%;
}
main video {
	display: block;
	max-width: 100%;
	height: auto;
	border-radius: 2rem;
	box-shadow: -0.25px -0.25px 0.25px 0 rgba(255, 255, 255, 0.5),
		0 0 1rem 0 rgba(0, 0, 0, 0.2);
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-70);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}
.postlist h2,
.postlist h3,
.postlist h4 {
	display: block;
	width: 100%;
}

.content {
	max-width: 60rem;
	margin-left: auto;
	margin-right: auto;
}
.content h2,
.content h3,
.content h4 {
	margin-top: 2rem;
	margin-bottom: 0;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	text-decoration: none;
	background: rgba(255, 255, 255, 0.1);
	padding: 0.25rem 0.5rem;
	border: 0.5px solid rgba(255, 255, 255, 0.25);
	border-radius: 1rem;
	box-shadow: -0.25px -0.25px 0.25px 0 rgba(255, 255, 255, 0.5),
		0 0 1rem 0 rgba(0, 0, 0, 0.2);
	font-size: 0.75em; /* 12px /16 */
	opacity: 0.5;
}
.post-tag:hover {
	opacity: 1;
	transition: opacity 0.25s ease-out;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: 0.5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

/* Direct Links / Markdown Headers */
.header-anchor {
	text-decoration: none;
	font-style: normal;
	font-size: 1em;
	margin-left: 0.1em;
	text-shadow: none;
}
a[href].header-anchor,
a[href].header-anchor:visited {
	color: transparent;
}
a[href].header-anchor:focus,
a[href].header-anchor:hover {
	text-decoration: underline;
}
a[href].header-anchor:focus,
:hover > a[href].header-anchor {
	color: #aaa;
}

main h1,
main h2,
main h3,
main h4 {
	font-family: var(--font-family-monospace);
}

h2 + .header-anchor {
	font-size: 1.5em;
}

footer {
	max-width: 80rem;
	margin: 2rem auto;
	text-align: center;
}

@media (max-width: 90rem) {
	footer {
		margin: 1rem;
	}
}

.signup-frame {
	max-width: 375px;
	margin: 0 auto;
}</style>
		<script src="/js/on-scroll.js"></script>
	</head>
	<body>
		<div class="bodyBackground"></div>
		<div class="bodyBGCover" id="overlay"></div>
		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<div class="header-container">
			<header class="panel " id="header">
				<a href="/" class="home-link">
					<span class="wordart-wrapper">
						<span class="wordart">Donovan’s Vision Blog</span>
					</span>
				</a>
				<nav class="panel">
					<h2 class="visually-hidden">Top level navigation menu</h2>
					<ul class="nav">
						<li class="nav-item"><a href="/">Home</a></li>
						<li class="nav-item"><a href="/blog/">All Posts</a></li>
						<li class="nav-item"><a href="/links/">Cool Links</a></li>
					</ul>
				</nav>
			</header>
			</div>
		<main id="skip" class="">
			
<div class="content panel padded">
	<h1>Reps Dev Diary #2: TestFlight &amp; Timers</h1>

<ul class="post-metadata">
	<li><time datetime="2024-02-19">19 February 2024</time></li>
	<li><a href="/tags/dev/" class="post-tag">dev</a></li>
	<li><a href="/tags/dev-diary/" class="post-tag">dev-diary</a></li>
</ul>

<p>Last week I launched my <a href="https://testflight.apple.com/join/Keq4Mca2">Reps app on TestFlight</a> for any curious early testers (primarily my brother) to try out. I also started using it properly myself and as a result, I've a long list of things I really want to improve right away.</p>
<h2 id="testflight-no-testing-like-user-testing" tabindex="-1">TestFlight: No testing like user testing <a class="header-anchor" href="#testflight-no-testing-like-user-testing">#</a></h2>
<p>No matter how much time spent going through user flows in the simulator, it's an entirely different experience using an app for real on a device. In my case, when I started using my app in the morning to log a workout, I immediately spotted a bunch of small (and large) issues.</p>
<p>I also wanted to bring in some external testers to try to get some feedback. To do this I enrolled in <a href="https://appstoreconnect.apple.com">App Store Connect</a>, which included a €99-per-year fee, and <a href="https://developer.apple.com/documentation/xcode/distributing-your-app-for-beta-testing-and-releases">pushed an archive of my app to TestFlight</a>.</p>
<p>The process of creating a release and then submitting it for review was fairly straightforward. One thing I needed to do was create a <a href="https://reps.hop.ie">Reps app website</a> with a <a href="https://reps.hop.ie/privacy/">privacy policy</a>. To do this I set up a quick <a href="https://www.11ty.dev">11ty</a> project and deployed it to Github Pages.</p>
<p>I then set up a public group in App Store Connect and when my TestFlight was reviewed I could start sharing the link.</p>
<h2 id="deploy-schedule" tabindex="-1">Deploy schedule <a class="header-anchor" href="#deploy-schedule">#</a></h2>
<p>It's very easy to deploy new versions of apps to TestFlight. I'm glad it is because I at one point managed to push a version with an important feature commented out. I was able to expire the old version and upload a new within minutes.</p>
<p>Generally though I'm going to aim to release a new version once every week or so, barring emergency fixes.</p>
<h2 id="initial-feedback" tabindex="-1">Initial feedback <a class="header-anchor" href="#initial-feedback">#</a></h2>
<p>So far I've quickly amassed a list of things I want to improve. In the first week the main issues were:</p>
<ul>
<li>Some late-updating quirks in the UI</li>
<li>The &quot;Log x reps&quot; button jumps too suddenly to the next exercise, which feels jarring</li>
<li>It's a hassle to have to leave the app to start a timer for timed exercises</li>
</ul>
<p>Last weekend I set out to address these issues.</p>
<h3 id="ui-state-out-of-sync" tabindex="-1">UI state out of sync <a class="header-anchor" href="#ui-state-out-of-sync">#</a></h3>
<p>Firstly, I refactored the way I store the UI state into one central ViewModel class for the main view. I had been tracking the state with two separate classes and trying to update them as needed, but without a central source of truth the UI was partially-updating at times. This pushes those two models into a role of background-storage and initial-state, and then my main ViewModel is responsible for keeping the current state and pushing updates into those models for storage. Seems to make things more solid.</p>
<p>I still end up instatiating the main ViewModel and then passing it down to children views, which feels a little sub-optimal but it's working for now until I find a way to properly use the local Environment to store the class.</p>
<h3 id="logging-reps-button" tabindex="-1">Logging reps button <a class="header-anchor" href="#logging-reps-button">#</a></h3>
<p>To help with this issue, I wanted to make it clear when reps were being saved. I also thought it would be helpful to have a <code>Cancel</code> option, as I've been hearing a lot about phantom clicks from Vision Pro users, and this can easily happen on any touch devices.</p>
<p>To address this, I added a <code>Task</code> to the saving action that sets <code>isSavingReps</code> to true, while awaiting a timer for a couple of seconds. During this time it'll show a saving message (maybe an icon later) along with a <code>Cancel</code> button. Hitting cancel stops the Task before it progresses to the save action.</p>
<div class="video-wrapper">
    <video autoplay muted loop playsinline width="300">
    <source src="https://i.imgur.com/oP7BiI2.mp4" type="video/mp4">
    </video>
</video>
<p>I think this improves the feel of adding reps.</p>
<h3 id="timed-exercises" tabindex="-1">Timed exercises <a class="header-anchor" href="#timed-exercises">#</a></h3>
<p>This was a big one. I found it was less than ideal to have to leave the app to start a timer when recording timed exercises. To fix this, I built a timer function into the exercise record view.</p>
<div style="max-width: 300px"><picture><source type="image/avif" srcset="/img/I2G_fYqqjw-692.avif 692w"><source type="image/webp" srcset="/img/I2G_fYqqjw-692.webp 692w"><img alt="Timer view" loading="lazy" decoding="async" src="/img/I2G_fYqqjw-692.png" width="692" height="622"></picture></div>
<p>This one was complex enough to require it's own ViewModel. I wanted to manage a few things - the accrued time both as a countdown until the target time was reached, and then counting upward, as well as a count-in of 5 seconds before the timer starts timing.</p>
<p>To do this I have two timers, with a reset option that you can call either by pressing reset or tapping the count-in while it's underway.</p>
<div class="video-wrapper">
    <video autoplay muted loop playsinline width="300">
    <source src="https://i.imgur.com/I3nM0di.mp4" type="video/mp4">
    </video>
</video>
<p>Once you stop the timer, it gives the option to then log the number of seconds recorded. You can also jump across to the manual view and record the number of seconds there if you prefer.</p>
<p>Lastly I added some sounds to indicate when the count-in was happening, when the timer starts, and when the target time is achieved. Of all the interactions, I think this is one that benefits from having some sounds as you might not be looking at the timer when doing a handstand, for example.</p>
<p>I grabbed some free sounds from <a href="https://kenney.nl">Kenney.nl</a> and they seem ok for now.</p>
<p>It's good enough as a first version, but I see a few gaps I really need to tidy up to make it feel more complete.</p>
<h2 id="current-todo-list" tabindex="-1">Current TODO list <a class="header-anchor" href="#current-todo-list">#</a></h2>
<p>I've since picked up a bunch more items for the TODO list. Some highlights that I hope to work on this week:</p>
<ul>
<li>UI fixes: Place the &quot;Set 1 of 2&quot; text closer to the reps number</li>
<li>Add the <code>Saving...</code> flow for measured seconds</li>
<li>Add plus and minus beside the log button to adjust the measured seconds</li>
<li>Improve the animation between exercises (it's a bit choppy)</li>
<li>... and a bunch of small UI tweaks</li>
</ul>
<p>Thanks for reading, and if you want to see my app as it is built, feel free to <a href="https://testflight.apple.com/join/Keq4Mca2">download Reps on TestFlight</a>.</p>

<ul class="links-nextprev"><li>Previous: <a href="/returns/">Are people returning Vision Pro?</a></li>
</ul>
</div>

		</main>

		<footer class="panel padded">
			<div class="signup">
				<h2>Donovan's Vision Newsletter</h2>
				<p>Stay up to date when new posts land</p>
				<div class="signup-frame">
					<iframe
					src="https://embeds.beehiiv.com/e4b485a8-6ae4-48c8-a4aa-e699ebbc193f?slim=true"
					data-test-id="beehiiv-embed"
					height="52"
					width="100%"
					frameborder="0"
					scrolling="no"
					style="margin: 1rem 0 2rem; border-radius: 0px !important; background-color: transparent;"
					></iframe>
				</div>
			</div>
			<nav class="panel secondary">
					<h2 class="visually-hidden">Footer navigation menu</h2>
					<ul class="nav">
						<li class="nav-item"><a href="/">Home</a></li>
						<li class="nav-item"><a href="/blog/">All Posts</a></li>
						<li class="nav-item"><a href="/links/">Cool Links</a></li>
					</ul>
				</nav>
				<p>This website is built on <a href="http://eleventy-base-blog.netlify.app">Eleventy Base Blog</a> with a few small tweaks.</p>

			<p>Thanks for reading, be sure to check out <a href="/feed/feed.xml">the RSS feed</a>.</p>
				<p>All content @2024 <a href="https://hop.ie">Donovan Hutchinson</a></p>
		</footer>

		<!-- Current page: /dev-diary-02/ -->
	</body>
</html>
